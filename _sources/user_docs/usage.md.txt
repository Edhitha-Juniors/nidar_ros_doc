# Usage Guide

This guide explains how to use the `drone_scout` package to plan and execute autonomous survey missions.

## Package Overview
The `drone_scout` package provides a complete software stack for autonomous drone-based surveillance and data collection. It includes a suite of ROS 2 nodes to handle everything from mission planning to real-time object detection.

### Key Nodes
* **waypoint_generate**: Creates survey missions and geofences from KML files.
* **mission_commander**: Executes missions by communicating with MAVROS.
* **Camera Nodes**: Handle image capture from various hardware.
* **geotag**: Correlates image captures with GPS/IMU data.
* **inference**: Runs YOLO object detection on captured images.
* **drone_status**: A central node for monitoring the health of all components.

## Running in Simulation (SITL)

To test the system in a simulated environment, you will need three separate terminals after sourcing your workspace (`source install/setup.bash`).

**Terminal 1: Start ArduPilot SITL**
Navigate to your ArduPilot directory and start the simulator. The `--out` parameter directs MAVLink traffic to the port MAVROS will listen on.
```bash
cd /path/to/ardupilot/ArduCopter
../Tools/autotest/sim_vehicle.py --map --console --out=udp:127.0.0.1:14550
```

**Terminal 2: Start Mavros**
```shell
ros2 run mavros mavros_node --ros-args -p fcu_url:=udp://:14540@172.17.160.1:14557
```
Step 3: Check if Mavros is connected (Terminal 3)
```shell
ros2 topic echo /mavros/state
```
**Terminal 3: Start Ros**
```shell
ros2 launch drone_scout scout_launch.py
```

# Important ROS Tools

1. RQT Graph to view topics graph
```shell
rqt_graph
```
2. ROS2 Doctor - to chck health of package
```shell
ros2 doctor
```
3. RVIZ2 Graphical View
```shell
ros2 run rviz2 rviz2
```
4. ROS Bag to record messages
```shell
ros2 bag record
```
4. ROS Bag 
```shell
ros2 bag record -o test_flight /mavros/mission/reached /camera/timestamps /mavros/imu/data /mavros/global_position/global /geotag_data --start-paused
```
